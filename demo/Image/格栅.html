<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>格栅</title>
    <style>
        #canvas {
            border: 1px solid red;
        }

    </style>
</head>

<body>
<canvas id="canvas" width="500" height="500"></canvas>
</body>
<script>
    var canvas = document.getElementById('canvas');
    var context = canvas.getContext("2d");
    var image = new Image();
    var step = 25,
        lineCor = 200;

    image.onload = function () {
        context.drawImage(image, 0, 0);
        var imageData = context.getImageData(0, 0, 300, 300);
        var data = imageData.data;
        console.log(imageData)
        for (var j = step; j < imageData.width; j += step) {
            for (var i = 0; i < imageData.height; i++) {
                var n = 4 * (j + i * imageData.width);
                var k = 4 * (i + j * imageData.height);
//                data[n] = lineCor;
//                data[n + 1] = lineCor;
//                data[n + 2] = lineCor;
                data[n + 3] = 200;
//                data[k] = lineCor;
//                data[k + 1] = lineCor;
//                data[k + 2] = lineCor;
                data[k + 3] = 200;
            }
        }

        context.putImageData(imageData, 150, 150)
    }
    image.src = "img/2.jpg"

</script>
</html>